!function(t) {
    function e(e, a, n) {
        e.CUTOKEN_REQUEST = t("#cu-token").val();
        t.post("reports.php", e, function(e) {
            t(a).cuSpinner();
            var s = cuHandler.retrieveAjax(e);
            void 0 != n && n(s, e);
        }, "json");
    }
    function a(e, a) {
        if (e) for (var n = "accepted" == a.status ? "svg-rmcommon-ok-circle" : "svg-rmcommon-sand-clock", s = "accepted" == a.status ? "svg-rmcommon-sand-clock" : "svg-rmcommon-ok", c = 0; c < a.ids.length; c++) t("[data-status='" + a.ids[c] + "']").length > 0 && (t("[data-status='" + a.ids[c] + "']").html("").removeClass("accepted" == a.status ? "text-grey" : "text-success").addClass("accepted" == a.status ? "text-success" : "text-grey"), 
        cuHandler.loadIcon(n, t("[data-status='" + a.ids[c] + "']")), t("[data-options='" + a.ids[c] + "'] .status").html("").removeClass("accepted" == a.status ? "green" : "purple").addClass("accepted" == a.status ? "purple" : "green").data("action", "accepted" == a.status ? "waiting" : "accept"), 
        cuHandler.loadIcon(s, t("[data-options='" + a.ids[c] + "'] .status")));
    }
    function n(e, a) {
        for (var n = 0; n < a.ids.length; n++) t("tr[data-id='" + a.ids[n] + "']").length > 0 && t("tr[data-id='" + a.ids[n] + "']").remove();
    }
    t("body").on("click", "[data-do='view']", function() {
        var a = {
            action: "details",
            id: t(this).data("id")
        }, n = t(this);
        return t(this).cuSpinner({
            icon: "svg-rmcommon-spinner-02"
        }), e(a, n), !1;
    }), t("body").on("click", '[data-do="status"]', function() {
        var n = {
            action: t(this).data("action"),
            ids: [ t(this).data("id") ]
        }, s = t(this);
        t(this).cuSpinner({
            icon: "svg-rmcommon-spinner-02"
        }), e(n, s, a);
    }), t("body").on("click", '[data-do="delete"]', function() {
        var a = {
            action: "delete",
            ids: [ t(this).data("id") ]
        };
        if (0 == confirm(mwLang.confirmReportDeletion)) return !1;
        var s = t(this);
        return t(this).cuSpinner({
            icon: "svg-rmcommon-spinner-02"
        }), e(a, s, n), !1;
    }), t("#reports-bulk-apply").click(function() {
        var s = t("#reports-actions").val();
        if ("" == s) return !1;
        var c = t("#table-reports :checkbox[data-oncheck]:checked");
        if (c.length <= 0) return cuHandler.notify({
            type: "alert-warning",
            icon: "svg-rmcommon-question",
            text: mwLang.selectReport
        }), !1;
        if ("delete" == s && 0 == confirm(mwLang.confirmReportDeletion)) return !1;
        t(this).cuSpinner({
            icon: "svg-rmcommon-spinner-02"
        });
        var i = [];
        t(c).each(function() {
            i.push(t(this).val());
        });
        var o = {
            action: s,
            ids: i
        };
        switch (s) {
          case "waiting":
          case "accept":
            r = a;
            break;

          case "delete":
            var r = n;
        }
        return e(o, t(this), r), !1;
    });
}(jQuery);